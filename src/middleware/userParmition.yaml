openapi: 3.0.0
info:
  version: 1.0.0
  title: DOCUMENTATION
  description: ""
  termsOfService: YOUR_TERMS_OF_SERVICE_URL
  contact:
    name: TEAM
    email: contact-email@something.io
    url: mywebsite.io
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  x-generation-date: "2023-06-18T17:15:24.085Z"

servers:
  - url: http://localhost:1337/api
    description: Development server
security:
  - bearerAuth: []
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Error:
      type: object
      required:
        - error
      properties:
        data:
          nullable: true
          oneOf:
            - type: object
            - type: array
              items:
                type: object
        error:
          type: object
          properties:
            status:
              type: integer
            name:
              type: string
            message:
              type: string
            details:
              type: object
    UsersPermissionsPermissionRequest:
      type: object
      required:
        - data
      properties:
        data:
          required:
            - action
          type: object
          properties:
            action:
              type: string
            role:
              oneOf:
                - type: integer
                - type: string
              example: string or id
    UsersPermissionsPermissionListResponseDataItem:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsPermission"
    UsersPermissionsPermissionListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/UsersPermissionsPermissionListResponseDataItem"
        meta:
          type: object
          properties:
            pagination:
              type: object
              properties:
                page:
                  type: integer
                pageSize:
                  type: integer
                  minimum: 25
                pageCount:
                  type: integer
                  maximum: 1
                total:
                  type: integer
    UsersPermissionsPermission:
      type: object
      required:
        - action
      properties:
        action:
          type: string
        role:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    type:
                      type: string
                    permissions:
                      type: object
                      properties:
                        data:
                          type: array
    UsersPermissionsPermissionResponseDataObject:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsPermission"
    UsersPermissionsPermissionResponse:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/UsersPermissionsPermissionResponseDataObject"
        meta:
          type: object
    UsersPermissionsRoleRequest:
      type: object
      required:
        - data
      properties:
        data:
          required:
            - name
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            type:
              type: string
            permissions:
              type: array
              items:
                oneOf:
                  - type: integer
                  - type: string
                example: string or id
            users:
              type: array
              items:
                oneOf:
                  - type: integer
                  - type: string
                example: string or id
    UsersPermissionsRoleListResponseDataItem:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsRole"
    UsersPermissionsRoleListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/UsersPermissionsRoleListResponseDataItem"
        meta:
          type: object
          properties:
            pagination:
              type: object
              properties:
                page:
                  type: integer
                pageSize:
                  type: integer
                  minimum: 25
                pageCount:
                  type: integer
                  maximum: 1
                total:
                  type: integer
    UsersPermissionsRole:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        description:
          type: string
        type:
          type: string
        permissions:
          type: object
          properties:
            data:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: number
                  attributes:
                    type: object
                    properties:
                      action:
                        type: string
                      role:
                        type: object
                        properties:
                          data:
                            type: object
                            properties:
                              id:
                                type: number
                              attributes:
                                type: object
                                properties:
                                  name:
                                    type: string
                                  description:
                                    type: string
                                  type:
                                    type: string
                                  permissions:
                                    type: object
                                    properties:
                                      data:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            id:
                                              type: number
                                            attributes:
                                              type: object
                                              properties: {}
                                  updatedBy:
                                    type: object
                                    properties:
                                      data:
                                        type: object
                                        properties:
                                          id:
                                            type: number
                                          attributes:
                                            type: object
                                            properties: {}
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      createdBy:
                        type: object
                        properties:
                          data:
                            type: object
                            properties:
                              id:
                                type: number
                              attributes:
                                type: object
                                properties: {}
                      updatedBy:
                        type: object
                        properties:
                          data:
                            type: object
                            properties:
                              id:
                                type: number
                              attributes:
                                type: object
                                properties: {}
        users:
          type: object
          properties:
            data:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: number
                  attributes:
                    type: object
                    properties: {}
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        createdBy:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties: {}
        updatedBy:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties: {}
    UsersPermissionsRoleResponseDataObject:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsRole"
    UsersPermissionsRoleResponse:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/UsersPermissionsRoleResponseDataObject"
        meta:
          type: object
    UsersPermissionsUserRequest:
      type: object
      required:
        - data
      properties:
        data:
          required:
            - username
            - email
          type: object
          properties:
            username:
              type: string
            email:
              type: string
              format: email
            provider:
              type: string
            password:
              type: string
              format: password
              example: "*******"
            resetPasswordToken:
              type: string
            confirmationToken:
              type: string
            confirmed:
              type: boolean
            blocked:
              type: boolean
            role:
              oneOf:
                - type: integer
                - type: string
              example: string or id
            items:
              type: array
              items:
                oneOf:
                  - type: integer
                  - type: string
                example: string or id
    UsersPermissionsUserListResponseDataItem:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsUser"
    UsersPermissionsUserListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/UsersPermissionsUserListResponseDataItem"
        meta:
          type: object
          properties:
            pagination:
              type: object
              properties:
                page:
                  type: integer
                pageSize:
                  type: integer
                  minimum: 25
                pageCount:
                  type: integer
                  maximum: 1
                total:
                  type: integer
    UsersPermissionsUser:
      type: object
      required:
        - username
        - email
      properties:
        username:
          type: string
        email:
          type: string
          format: email
        provider:
          type: string
        resetPasswordToken:
          type: string
        confirmationToken:
          type: string
        confirmed:
          type: boolean
        blocked:
          type: boolean
        role:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    type:
                      type: string
                    permissions:
                      type: object
                      properties:
                        data:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              attributes:
                                type: object
                                properties:
                                  action:
                                    type: string
                                  role:
                                    type: object
                                    properties:
                                      data:
                                        type: object
                                        properties:
                                          id:
                                            type: number
                                          attributes:
                                            type: object
                                            properties: {}
                    createdAt:
                      type: string
                      format: date-time
                    updatedAt:
                      type: string
                      format: date-time
                    createdBy:
                      type: object
                      properties:
                        data:
                          type: object
                          properties:
                            id:
                              type: number
                            attributes:
                              type: object
                              properties: {}
                    updatedBy:
                      type: object
                      properties:
                        data:
                          type: object
                          properties:
                            id:
                              type: number
                            attributes:
                              type: object
                              properties: {}
        items:
          type: object
          properties:
            data:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: number
                  attributes:
                    type: object
                    properties: {}
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        createdBy:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties: {}
        updatedBy:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: number
                attributes:
                  type: object
                  properties: {}
    UsersPermissionsUserResponseDataObject:
      type: object
      properties:
        id:
          type: number
        attributes:
          $ref: "#/components/schemas/UsersPermissionsUser"
    UsersPermissionsUserResponse:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/UsersPermissionsUserResponseDataObject"
        meta:
          type: object
    Users-Permissions-Role:
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        description:
          type: string
        type:
          type: string
        createdAt:
          type: datetime
        updatedAt:
          type: datetime
    Users-Permissions-User:
      type: object
      properties:
        id:
          type: number
          example: 1
        username:
          type: string
          example: foo.bar
        email:
          type: string
          example: foo.bar@strapi.io
        provider:
          type: string
          example: local
        confirmed:
          type: boolean
          example: true
        blocked:
          type: boolean
          example: false
        createdAt:
          type: datetime
          example: "2022-06-02T08:32:06.258Z"
        updatedAt:
          type: datetime
          example: "2022-06-02T08:32:06.267Z"
    Users-Permissions-UserRegistration:
      type: object
      properties:
        jwt:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
        user:
          $ref: "#/components/schemas/Users-Permissions-User"
    Users-Permissions-PermissionsTree:
      type: object
      additionalProperties:
        type: object
        description: every api
        properties:
          controllers:
            description: every controller of the api
            type: object
            additionalProperties:
              type: object
              additionalProperties:
                description: every action of every controller
                type: object
                properties:
                  enabled:
                    type: boolean
                  policy:
                    type: string
  parameters: {}
  responses: {}
  examples: {}
  requestBodies:
    Users-Permissions-RoleRequest:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
              description:
                type: string
              type:
                type: string
              permissions:
                $ref: "#/components/schemas/Users-Permissions-PermissionsTree"
          example:
            name: foo
            description: role foo
            permissions:
              api::content-type.content-type:
                controllers:
                  controllerA:
                    find:
                      enabled: true
paths:
  /users-permissions/permissions:
    get:
      tags:
        - Users-Permissions - Users & Roles
      summary: Get default generated permissions
      responses:
        "200":
          description: Returns the permissions tree
          content:
            application/json:
              schema:
                type: object
                properties:
                  permissions:
                    $ref: "#/components/schemas/Users-Permissions-PermissionsTree"
              example:
                permissions:
                  api::content-type.content-type:
                    controllers:
                      controllerA:
                        find:
                          enabled: false
                          policy: ""
                        findOne:
                          enabled: false
                          policy: ""
                        create:
                          enabled: false
                          policy: ""
                      controllerB:
                        find:
                          enabled: false
                          policy: ""
                        findOne:
                          enabled: false
                          policy: ""
                        create:
                          enabled: false
                          policy: ""
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /users-permissions/roles/{id}:
    get:
      tags:
        - Users-Permissions - Users & Roles
      summary: Get a role
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: role Id
      responses:
        "200":
          description: Returns the role
          content:
            application/json:
              schema:
                type: object
                properties:
                  role:
                    $ref: "#/components/schemas/Users-Permissions-Role"
              example:
                role:
                  id: 1
                  name: Public
                  description: Default role given to unauthenticated user.
                  type: public
                  createdAt: "2022-05-19T17:35:35.097Z"
                  updatedAt: "2022-05-31T16:05:36.603Z"
                  permissions:
                    api::content-type.content-type:
                      controllers:
                        controllerA:
                          find:
                            enabled: true
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /users-permissions/roles:
    get:
      tags:
        - Users-Permissions - Users & Roles
      summary: List roles
      responses:
        "200":
          description: Returns list of roles
          content:
            application/json:
              schema:
                type: object
                properties:
                  roles:
                    type: array
                    items:
                      allOf:
                        - $ref: "#/components/schemas/Users-Permissions-Role"
                        - type: object
                          properties:
                            nb_users:
                              type: number
              example:
                roles:
                  - id: 1
                    name: Public
                    description: Default role given to unauthenticated user.
                    type: public
                    createdAt: "2022-05-19T17:35:35.097Z"
                    updatedAt: "2022-05-31T16:05:36.603Z"
                    nb_users: 0
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      tags:
        - Users-Permissions - Users & Roles
      summary: Create a role
      requestBody:
        $ref: "#/components/requestBodies/Users-Permissions-RoleRequest"
      responses:
        "200":
          description: Returns ok if the role was create
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: enum
                    enum:
                      - true
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /users-permissions/roles/{role}:
    put:
      tags:
        - Users-Permissions - Users & Roles
      summary: Update a role
      parameters:
        - in: path
          name: role
          required: true
          schema:
            type: string
          description: role Id
      requestBody:
        $ref: "#/components/requestBodies/Users-Permissions-RoleRequest"
      responses:
        "200":
          description: Returns ok if the role was udpated
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: enum
                    enum:
                      - true
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - Users-Permissions - Users & Roles
      summary: Delete a role
      parameters:
        - in: path
          name: role
          required: true
          schema:
            type: string
          description: role Id
      responses:
        "200":
          description: Returns ok if the role was delete
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: enum
                    enum:
                      - true
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
